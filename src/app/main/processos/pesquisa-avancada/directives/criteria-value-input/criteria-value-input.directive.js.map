{"version":3,"sources":["processos/pesquisa-avancada/directives/criteria-value-input/criteria-value-input.directive.ts"],"names":[],"mappings":"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","file":"processos/pesquisa-avancada/directives/criteria-value-input/criteria-value-input.directive.js","sourcesContent":["module app.processos.pesquisaAvancada {\r\n    'use strict';\r\n\r\n    import IScope = angular.IScope;\r\n    import IDirective = angular.IDirective;\r\n    import IAugmentedJQuery = angular.IAugmentedJQuery;\r\n    import IAttributes = angular.IAttributes;\r\n    import IDirectiveFactory = angular.IDirectiveFactory;\r\n\r\n    interface CriteriaValueInputScope extends IScope {\r\n        criteria: ICriteria;\r\n    }\r\n\r\n    class CriteriaValueInputDirective implements IDirective {\r\n\r\n        public restrict: string = 'E';\r\n        public templateUrl: string = 'app/main/processos/pesquisa-avancada/directives/criteria-value-input/criteria-value-input.html';\r\n        public scope: Object = {\r\n            criteria : \"=\"\r\n        };\r\n        public link: Function = () => {\r\n            return ($scope: CriteriaValueInputScope, el: IAugmentedJQuery, attrs: IAttributes) => {\r\n\r\n                $scope.$watch('criteria.value', function() {\r\n                    CriteriaValueInputDirective.updateCriteriaValidity($scope.criteria);\r\n                });\r\n\r\n                $scope.$watch('criteria.value[0]', function() {\r\n                    CriteriaValueInputDirective.updateCriteriaValidity($scope.criteria);\r\n                });\r\n\r\n                $scope.$watch('criteria.value[1]', function() {\r\n                    CriteriaValueInputDirective.updateCriteriaValidity($scope.criteria);\r\n                });\r\n\r\n                $scope.$watch('criteria.comparisonOperator', (op: ComparisionOperator) => {\r\n                    var criteria: ICriteria = $scope.criteria,\r\n                        value = criteria.value;\r\n\r\n                    if (op == ComparisionOperator.ENTRE) {\r\n                        criteria.value = _.isArray(value) ? value : [value];\r\n                    } else {\r\n                        criteria.value = _.isArray(value) ? value[0] : value;\r\n                    }\r\n                    CriteriaValueInputDirective.updateCriteriaValidity(criteria);\r\n                });\r\n            }\r\n        };\r\n\r\n        private static updateCriteriaValidity(criteria: ICriteria): void {\r\n            switch (criteria.comparisonOperator) {\r\n                case ComparisionOperator.IGUAL:\r\n                case ComparisionOperator.CONTEM:\r\n                case ComparisionOperator.MAIORQUE:\r\n                case ComparisionOperator.MENORQUE:\r\n                    if (criteria.trait.dataType == 'date') {\r\n                        criteria.valid = (!!criteria.value);\r\n                    } else {\r\n                        criteria.valid = ((!!criteria.value) && (criteria.value.length > 0));\r\n                    }\r\n                    break;\r\n\r\n                case ComparisionOperator.ENTRE:\r\n                    if (criteria.trait.dataType == 'date') {\r\n                        criteria.valid = ((!!criteria.value[0]) && (!!criteria.value[1]));\r\n                    } else {\r\n                        criteria.valid = ((!!criteria.value[0]) && (!!criteria.value[1]) && (criteria.value[0].length > 0) && (criteria.value[1].length > 0));\r\n                    }\r\n                    break;\r\n\r\n                case ComparisionOperator.EXISTE:\r\n                    criteria.valid = true;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        public static factory(): IDirectiveFactory {\r\n            return () => {\r\n                return new CriteriaValueInputDirective();\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('app.processos.pesquisa-avancada')\r\n        .directive('criteriaValueInput', CriteriaValueInputDirective.factory());\r\n}"],"sourceRoot":"/source/"}