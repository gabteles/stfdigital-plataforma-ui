{"version":3,"sources":["tarefas/minhas-tarefas/dialogs/task/task-dialog.controller.ts"],"names":[],"mappings":"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","file":"tarefas/minhas-tarefas/dialogs/task/task-dialog.controller.js","sourcesContent":["module app.tarefas.minhasTarefas {\r\n    'use strict';\r\n\r\n    import IDialogService = angular.material.IDialogService;\r\n    import IFilterService = angular.IFilterService;\r\n    import IHttpService = angular.IHttpService;\r\n    import IStateService = angular.ui.IStateService;\r\n    import ITranslateService = angular.translate.ITranslateService;\r\n    \r\n    export class TaskDialogController {\r\n\r\n        private task: ITask;\r\n        public newTask: boolean = false;\r\n        \r\n        /** @ngInject **/\r\n        constructor(private $mdDialog: IDialogService,\r\n                    private $translate: ITranslateService, \r\n                    private $http: IHttpService,\r\n                    private $state: IStateService,\r\n                    task: ITask,\r\n                    private tasks: ITask[],\r\n                    private event: MouseEvent) {\r\n\r\n            this.task = angular.copy(task);\r\n\r\n            if (! this.task) {\r\n                this.task = <ITask>{\r\n                    id                : '',\r\n                    title             : '',\r\n                    notes             : '',\r\n                    startDate         : new Date(),\r\n                    startDateTimestamp: new Date().getTime(),\r\n                    dueDate           : null,\r\n                    dueDateTimestamp  : null,\r\n                    completed         : false,\r\n                    starred           : false,\r\n                    important         : false,\r\n                    deleted           : false,\r\n                    tags              : [],\r\n                    attachments       : []\r\n                };\r\n                this.newTask = true;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Add new task\r\n         */\r\n        public addNewTask() {\r\n            this.tasks.unshift(this.task);\r\n            this.closeDialog();\r\n        }\r\n\r\n        /**\r\n         * Save task\r\n         */\r\n        public saveTask() {\r\n            for ( var i = 0; i < this.tasks.length; i++ ) {\r\n                if ( this.tasks[i].id === this.task.id ) {\r\n                    this.tasks[i] = angular.copy(this.task);\r\n                    break;\r\n                }\r\n            }\r\n            var close = this.closeDialog;\r\n\r\n            if (this.task.title === 'Autuar Processo OriginÃ¡rio') {\r\n                this.$http.post(\"http://localhost:8092/api/processos/autuacao\", \"{\\\"processoId\\\":\" + this.task.id.substring(3) + \", \\\"classeId\\\":\\\"ADI\\\"}\").success(function() {\r\n                    close();\r\n                });\r\n            }\r\n\r\n            if (this.task.title === 'Distribuir Processo') {\r\n                this.$http.post(\"http://localhost:8093/api/distribuicao\", \"{\\\"distribuicaoId\\\":\" + this.task.id.substring(3) + \"}\").success(function() {\r\n                    close();\r\n                });\r\n            }\r\n            this.$state.go('app.tarefas.minhas-tarefas', {}, { reload: true });\r\n        }\r\n\r\n        /**\r\n         * Delete task\r\n         */\r\n        public deleteTask() {\r\n            var confirm = this.$mdDialog.confirm()\r\n                .title(this.$translate.instant('TAREFAS.MINHAS-TAREFAS.DIALOGO.VOCE-TEM-CERTEZA'))\r\n                .textContent(this.$translate.instant('TAREFAS.MINHAS-TAREFAS.DIALOGO.ESSA-TAREFA-SERA-DELETADA'))\r\n                .ariaLabel(this.$translate.instant('TAREFAS.MINHAS-TAREFAS.DIALOGO.DELETAR-TAREFA'))\r\n                .ok(this.$translate.instant('TAREFAS.MINHAS-TAREFAS.DIALOGO.DELETAR'))\r\n                .cancel(this.$translate.instant('TAREFAS.MINHAS-TAREFAS.DIALOGO.CANCELAR'))\r\n                .targetEvent(this.event);\r\n\r\n            this.$mdDialog.show(confirm).then(() => {\r\n                for ( var i = 0; i < this.tasks.length; i++ ) {\r\n                    if ( this.tasks[i].id === this.task.id ) {\r\n                        this.tasks[i].deleted = true;\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * New tag\r\n         *\r\n         * @param chip\r\n         * @returns {{label: *, color: string}}\r\n         */\r\n        public newTag(chip): ITaskTag {\r\n            var tagColors = ['#388E3C', '#F44336', '#FF9800', '#0091EA', '#9C27B0'];\r\n\r\n            return <ITaskTag> {\r\n                name : chip,\r\n                label: chip,\r\n                color: tagColors[Math.floor(Math.random() * (tagColors.length))]\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Close dialog\r\n         */\r\n        public closeDialog() {\r\n            this.$mdDialog.hide();\r\n        }\r\n\r\n        /**\r\n         * Delete task attachment\r\n         *\r\n         * @param attachment\r\n         * @param task\r\n         */\r\n        public deleteAttachment(attachment: ITaskAttachment, task: ITask) {\r\n            var index = task.attachments.indexOf(attachment);\r\n            if (index > -1) {\r\n                task.attachments.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n    \r\n    angular\r\n        .module('app.tarefas.minhas-tarefas')\r\n        .controller('app.tarefas.minhas-tarefas.TaskDialogController', TaskDialogController);\r\n}"],"sourceRoot":"/source/"}